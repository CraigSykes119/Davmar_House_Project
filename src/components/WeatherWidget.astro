---
const API_KEY = import.meta.env.PUBLIC_WEATHER_API_KEY;
const CITY = "Blarney";
const COUNTRY = "IE";

// Fetch weather data from OpenWeatherMap API
const response = await fetch(
  `https://api.openweathermap.org/data/2.5/weather?q=${CITY},${COUNTRY}&appid=${API_KEY}&units=metric`
);

let weather = null;
if (response.ok) {
  weather = await response.json();
} else {
  console.error("Failed to fetch weather data:", response.statusText);
}
---

<div class="weather-widget">
  {weather ? (
    <div class="weather-info">
      <h3>Weather in {CITY}</h3>
      <img
        src={`https://openweathermap.org/img/wn/${weather.weather[0].icon}.png`}
        alt={weather.weather[0].description}
      />
      <p>{weather.weather[0].description}</p>
      <p><strong>{weather.main.temp}Â°C</strong></p>
    </div>
  ) : (
    <p>Weather data not available</p>
  )}
</div>

<style>
.weather-widget {
  background: #f9f9f9;
  padding: 10px;
  border-radius: 8px;
  text-align: center;
  box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
  max-width: 220px;
  margin: 10px auto;
}
.weather-info img {
  width: 50px;
  height: 50px;
}
</style>
