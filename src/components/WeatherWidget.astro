---
const apiKey = import.meta.env.VITE_WEATHER_API_KEY;
const city = "Blarney,IE"; // Blarney, Ireland
const weatherApiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

let weatherData = null;

try {
  const response = await fetch(weatherApiUrl);
  if (!response.ok) throw new Error("Failed to fetch weather data");
  weatherData = await response.json();
} catch (error) {
  console.error("Error fetching weather:", error);
}
---

<div class="weather-widget">
  {weatherData ? (
    <>
      <h3>üå¶Ô∏è Current Weather in Blarney</h3>
      <p>Temperature: {weatherData.main.temp}¬∞C</p>
      <p>Condition: {weatherData.weather[0].description}</p>
      <p>Humidity: {weatherData.main.humidity}%</p>
      <p>Wind Speed: {weatherData.wind.speed} m/s</p>
    </>
  ) : (
    <p>‚ùå Could not load weather data. Try again later.</p>
  )}
</div>

<style>
.weather-widget {
  background: #ffffff;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  text-align: center;
  margin: 20px auto;
  width: 300px;
}

.weather-widget h3 {
  color: #12763e;
}
</style>
